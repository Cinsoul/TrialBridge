import{j as e}from"./index-447909c0.js";import{f as t,r as s}from"./react-vendor-f13607dd.js";import{a as i}from"./authService-993db9ec.js";import{e as a}from"./educationService-7a791986.js";import{R as r,b as l,A as n,d as o,c,o as d,l as x,X as h,Y as g,S as p,D as j,m,Z as f,n as u,f as y,e as v,_ as S,V as w,$ as C,a0 as b,B as z,P as I,Q as B}from"./antd-vendor-11d390a1.js";const{Title:k,Text:A,Paragraph:T}=y,{TabPane:P}=d,{Search:L}=u,R=()=>{const y=t(),R=i.getCurrentUser(),[M,E]=s.useState([]),[F,V]=s.useState([]),[q,H]=s.useState(!0),[Q,U]=s.useState(""),[W,D]=s.useState(null),[K,X]=s.useState(!1),[Y,Z]=s.useState(0),[$,_]=s.useState(""),[G,J]=s.useState(!1);s.useEffect((()=>{R&&"patient"===R.role||y("/patient/login")}),[R,y]),s.useEffect((()=>{(async()=>{try{const e=await a.getAllResources();e.success&&(E(e.resources),V(e.resources))}catch(e){}finally{H(!1)}})()}),[]),s.useEffect((()=>{if(Q){const e=Q.toLowerCase(),t=M.filter((t=>t.title.toLowerCase().includes(e)||t.summary.toLowerCase().includes(e)||t.tags.some((t=>t.toLowerCase().includes(e)))));V(t)}else V(M)}),[Q,M]);const N=()=>{X(!1),D(null),Z(0),_("")},O=t=>e.jsx(x.Item,{onClick:()=>(e=>{D(e),X(!0)})(t),style:{cursor:"pointer"},children:e.jsx(v,{hoverable:!0,style:{width:"100%"},cover:"infographic"===t.type?e.jsx("div",{style:{height:200,display:"flex",justifyContent:"center",alignItems:"center",background:"#f0f2f5"},children:e.jsx(S,{preview:!1,src:"https://via.placeholder.com/400x200?text=Infographic+Preview",alt:t.title,style:{maxHeight:"100%",maxWidth:"100%"}})}):"video"===t.type?e.jsx("div",{style:{height:200,display:"flex",justifyContent:"center",alignItems:"center",background:"#000"},children:e.jsx(w,{style:{fontSize:64,color:"#fff"}})}):null,children:e.jsx(v.Meta,{avatar:(t=>{switch(t){case"article":default:return e.jsx(z,{style:{fontSize:"24px",color:"#1890ff"}});case"video":return e.jsx(w,{style:{fontSize:"24px",color:"#ff4d4f"}});case"faq":return e.jsx(B,{style:{fontSize:"24px",color:"#52c41a"}});case"infographic":return e.jsx(I,{style:{fontSize:"24px",color:"#722ed1"}})}})(t.type),title:t.title,description:e.jsxs(p,{direction:"vertical",style:{width:"100%"},children:[e.jsx(T,{ellipsis:{rows:2},children:t.summary}),e.jsx(p,{children:t.tags.map((t=>e.jsx(m,{children:t},t)))}),e.jsxs(p,{split:e.jsx(j,{type:"vertical"}),children:[e.jsx(A,{type:"secondary",children:t.datePublished}),e.jsxs(A,{type:"secondary",children:[e.jsx(C,{})," ",Math.floor(50*Math.random())+10]}),e.jsxs(A,{type:"secondary",children:[e.jsx(b,{})," ",Math.floor(20*Math.random())+5]})]})]})})})},t.id);return e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(r,{align:"middle",style:{marginBottom:"24px"},children:[e.jsx(l,{icon:e.jsx(n,{}),onClick:()=>{y("/patient/dashboard")},style:{marginRight:"16px"},children:"Back"}),e.jsx(k,{level:2,style:{margin:0},children:"Information Plaza"})]}),e.jsx(r,{style:{marginBottom:24},children:e.jsx(o,{span:24,children:e.jsx(L,{placeholder:"Search for clinical trial information",allowClear:!0,enterButton:"Search",size:"large",onSearch:e=>{U(e)}})})}),q?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(c,{size:"large"})}):e.jsxs(d,{defaultActiveKey:"all",children:[e.jsx(P,{tab:"All Resources",children:e.jsx(x,{grid:{gutter:16,xs:1,sm:2,md:2,lg:3,xl:3,xxl:4},dataSource:F,renderItem:O,pagination:{onChange:()=>{window.scrollTo(0,0)},pageSize:12}})},"all"),e.jsx(P,{tab:"Articles",children:e.jsx(x,{grid:{gutter:16,xs:1,sm:2,md:2,lg:3,xl:3,xxl:4},dataSource:F.filter((e=>"article"===e.type)),renderItem:O,pagination:{onChange:()=>{window.scrollTo(0,0)},pageSize:12}})},"articles"),e.jsx(P,{tab:"Videos",children:e.jsx(x,{grid:{gutter:16,xs:1,sm:2,md:2,lg:3,xl:3,xxl:4},dataSource:F.filter((e=>"video"===e.type)),renderItem:O,pagination:{onChange:()=>{window.scrollTo(0,0)},pageSize:12}})},"videos"),e.jsx(P,{tab:"Infographics",children:e.jsx(x,{grid:{gutter:16,xs:1,sm:2,md:2,lg:3,xl:3,xxl:4},dataSource:F.filter((e=>"infographic"===e.type)),renderItem:O,pagination:{onChange:()=>{window.scrollTo(0,0)},pageSize:12}})},"infographics"),e.jsx(P,{tab:"FAQs",children:e.jsx(x,{grid:{gutter:16,xs:1,sm:2,md:2,lg:3,xl:3,xxl:4},dataSource:F.filter((e=>"faq"===e.type)),renderItem:O,pagination:{onChange:()=>{window.scrollTo(0,0)},pageSize:12}})},"faqs")]}),e.jsx(h,{title:null==W?void 0:W.title,open:K,onCancel:N,width:800,footer:[e.jsx(l,{onClick:N,children:"Close"},"close"),e.jsx(l,{type:"default",icon:e.jsx(g,{}),children:"Share"},"share")],children:W&&e.jsxs(e.Fragment,{children:[e.jsxs(p,{split:e.jsx(j,{type:"vertical"}),style:{marginBottom:16},children:[e.jsxs(A,{type:"secondary",children:["Published: ",W.datePublished]}),e.jsxs(A,{type:"secondary",children:["Author: ",W.author||"Unknown"]}),e.jsxs(A,{type:"secondary",children:["Views: ",W.viewCount]})]}),e.jsx("div",{style:{marginBottom:24},children:W.tags.map((t=>e.jsx(m,{style:{marginRight:8},children:t},t)))}),(ee=W,"infographic"===ee.type?e.jsx("div",{style:{textAlign:"center",marginBottom:24},children:e.jsx(S,{src:"https://via.placeholder.com/800x600?text=Infographic+Content",alt:ee.title,style:{maxWidth:"100%"}})}):"video"===ee.type?e.jsx("div",{style:{textAlign:"center",marginBottom:24},children:e.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden"},children:e.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#000",display:"flex",justifyContent:"center",alignItems:"center"},children:[e.jsx(w,{style:{fontSize:64,color:"#fff"}}),e.jsx(A,{style:{color:"#fff",marginLeft:16},children:"Video content would play here"})]})})}):e.jsx(T,{style:{whiteSpace:"pre-line"},children:ee.content})),e.jsx(j,{children:"Rate this resource"}),e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(f,{allowHalf:!0,value:Y,onChange:e=>{Z(e)}}),e.jsx("span",{style:{marginLeft:8},children:Y?e.jsxs(A,{type:"secondary",children:[Y," stars"]}):""})]}),e.jsx(u.TextArea,{rows:4,value:$,onChange:e=>{_(e.target.value)},placeholder:"Share your thoughts about this resource...",style:{marginBottom:16}}),e.jsx(l,{type:"primary",onClick:async()=>{if(W&&(null==R?void 0:R.email)){J(!0);try{await a.submitFeedback({resourceId:W.id,patientEmail:R.email,rating:Y,comment:$}),Z(0),_(""),X(!1),D(null)}catch(e){}finally{J(!1)}}},loading:G,children:"Submit Feedback"})]})})]});var ee};export{R as default};
//# sourceMappingURL=InformationPlaza-10b63fc6.js.map
