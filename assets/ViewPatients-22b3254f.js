import{j as e}from"./index-d693efaa.js";import{f as a,r as t}from"./react-vendor-f13607dd.js";import{a as i}from"./authService-993db9ec.js";import{p as r}from"./patientService-6b05a51d.js";import{R as s,b as n,A as l,d as o,n as d,j as c,x as m,f as x,s as p,S as h,m as j}from"./antd-vendor-11d390a1.js";const{Title:g}=x,y=()=>{const x=a(),y=i.getCurrentUser(),[u,f]=t.useState([]),[k,w]=t.useState(!0),[C,v]=t.useState("");t.useEffect((()=>{y&&"trialTeam"===y.role||x("/trial-team/login")}),[y,x]),t.useEffect((()=>{(async()=>{try{const e=await r.getAllPatients();e.success?f(e.patients||[]):p.error("Failed to load patients")}catch(e){p.error("An error occurred while loading patients")}finally{w(!1)}})()}),[]);const S=u.filter((e=>e.name.toLowerCase().includes(C.toLowerCase())||e.email.toLowerCase().includes(C.toLowerCase()))),A=[{title:"Name",dataIndex:"name",key:"name",render:a=>e.jsx("a",{children:a})},{title:"Age",dataIndex:"age",key:"age"},{title:"Gender",dataIndex:"gender",key:"gender",render:e=>e.charAt(0).toUpperCase()+e.slice(1)},{title:"Email",dataIndex:"email",key:"email"},{title:"Phone",dataIndex:"phone",key:"phone"},{title:"Medical Conditions",dataIndex:"medicalHistory",key:"conditions",render:a=>e.jsx(h,{size:"small",wrap:!0,children:a.conditions.map(((a,t)=>e.jsx(j,{color:"blue",children:a},t)))})},{title:"Actions",key:"actions",render:()=>e.jsxs(h,{size:"small",children:[e.jsx(n,{type:"link",children:"View Details"}),e.jsx(n,{type:"link",children:"Enroll in Trial"})]})}];return e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(s,{align:"middle",style:{marginBottom:"24px"},children:[e.jsx(n,{icon:e.jsx(l,{}),onClick:()=>{x("/trial-team/dashboard")},style:{marginRight:"16px"},children:"Back"}),e.jsx(g,{level:2,style:{margin:0},children:"Enrolled Patients"})]}),e.jsx(s,{justify:"end",style:{marginBottom:"16px"},children:e.jsx(o,{span:6,children:e.jsx(d,{placeholder:"Search by name or email",prefix:e.jsx(c,{}),onChange:e=>{return a=e.target.value,void v(a);var a},allowClear:!0})})}),e.jsx(m,{columns:A,dataSource:S,rowKey:"email",loading:k,pagination:{pageSize:10}})]})};export{y as default};
//# sourceMappingURL=ViewPatients-22b3254f.js.map
