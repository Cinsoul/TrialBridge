import{j as e}from"./index-d693efaa.js";import{f as i,r as t}from"./react-vendor-f13607dd.js";import{a as s}from"./authService-993db9ec.js";import{R as r,b as l,A as n,a5 as a,d,e as o,a6 as c,D as p,W as m,o as x,J as h,l as u,X as j,z as g,a7 as y,g as f,m as v,O as w,f as b,a8 as R}from"./antd-vendor-11d390a1.js";const{Title:C,Text:A,Paragraph:S}=b,{TabPane:P}=x,{Step:q}=m,k=()=>{const b=i(),k=s.getCurrentUser(),[I,D]=t.useState(350),[T,z]=t.useState(!1),[B,E]=t.useState(null),[L,F]=t.useState(!1);t.useEffect((()=>{k&&"patient"===k.role||b("/patient/login")}),[k,b]);const H=()=>{z(!1),E(null)},$=[{id:"reward-001",title:"Free Health Checkup",description:"Complete physical examination with basic lab tests included.",type:"medical",pointsRequired:200,available:!0,expiryDate:"2023-12-31"},{id:"reward-002",title:"Specialist Consultation",description:"One-time consultation with a specialist of your choice.",type:"medical",pointsRequired:350,available:!0,expiryDate:"2023-12-31"},{id:"reward-003",title:"Prescription Discount",description:"20% discount on your next prescription medication purchase.",type:"medical",pointsRequired:150,available:!0,expiryDate:"2023-12-31"},{id:"reward-004",title:"Gift Card",description:"$25 gift card for pharmacy purchases.",type:"financial",pointsRequired:250,available:!0,expiryDate:"2023-12-31"},{id:"reward-005",title:"Transportation Credit",description:"$30 credit for transportation to and from medical appointments.",type:"service",pointsRequired:300,available:!0,expiryDate:"2023-12-31"},{id:"reward-006",title:"Premium Health Tracker",description:"Access to premium features in the health tracking app for 3 months.",type:"service",pointsRequired:400,available:!0,expiryDate:"2023-12-31"},{id:"reward-007",title:"Dental Checkup",description:"Free dental examination and cleaning.",type:"medical",pointsRequired:450,available:!0,expiryDate:"2023-12-31"},{id:"reward-008",title:"Nutrition Consultation",description:"One-hour session with a registered dietitian.",type:"medical",pointsRequired:300,available:!0,expiryDate:"2023-12-31"}],K=[{id:"achievement-001",title:"Profile Completion",description:"Complete your health profile with all required information.",completed:!0,pointsAwarded:50,dateCompleted:"2023-05-10"},{id:"achievement-002",title:"First Trial Application",description:"Apply for your first clinical trial.",completed:!0,pointsAwarded:100,dateCompleted:"2023-05-15"},{id:"achievement-003",title:"Health Data Sharing",description:"Share your health data with a trial team.",completed:!0,pointsAwarded:75,dateCompleted:"2023-05-20"},{id:"achievement-004",title:"Screening Completion",description:"Complete the screening process for a clinical trial.",completed:!0,pointsAwarded:125,dateCompleted:"2023-05-25"},{id:"achievement-005",title:"Educational Resources",description:"Read 5 educational resources about clinical trials.",completed:!0,pointsAwarded:100,dateCompleted:"2023-06-01"},{id:"achievement-006",title:"Trial Participation",description:"Participate in a clinical trial for at least 1 month.",completed:!1,pointsAwarded:200},{id:"achievement-007",title:"Feedback Submission",description:"Submit feedback on your trial experience.",completed:!1,pointsAwarded:75},{id:"achievement-008",title:"Referral Program",description:"Refer a friend who signs up for the platform.",completed:!1,pointsAwarded:150}],M=$.filter((e=>"medical"===e.type)),O=$.filter((e=>"financial"===e.type)),W=$.filter((e=>"service"===e.type)),Y=K.filter((e=>e.completed)),U=K.filter((e=>!e.completed)),G=i=>e.jsx(u.Item,{onClick:()=>(e=>{E(e),z(!0)})(i),style:{cursor:"pointer"},children:e.jsx(o,{hoverable:!0,children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:["medical"===i.type?e.jsx(g,{style:{fontSize:24,color:"#1890ff",marginRight:8}}):"financial"===i.type?e.jsx(y,{style:{fontSize:24,color:"#52c41a",marginRight:8}}):e.jsx(f,{style:{fontSize:24,color:"#722ed1",marginRight:8}}),e.jsx(C,{level:5,style:{margin:0},children:i.title})]}),e.jsx(S,{children:i.description}),e.jsxs(A,{type:"secondary",children:["Expires: ",i.expiryDate]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(w,{value:i.pointsRequired,suffix:"pts",valueStyle:{color:I>=i.pointsRequired?"#52c41a":"#ff4d4f"}}),e.jsx(l,{type:"primary",size:"small",disabled:I<i.pointsRequired,children:"Redeem"})]})]})})},i.id),J=i=>e.jsx(u.Item,{children:e.jsx(o,{children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[e.jsx(R,{style:{fontSize:24,color:i.completed?"#faad14":"#d9d9d9",marginRight:8}}),e.jsx(C,{level:5,style:{margin:0},children:i.title})]}),e.jsx(S,{children:i.description}),i.completed&&i.dateCompleted&&e.jsxs(A,{type:"secondary",children:["Completed on: ",i.dateCompleted]})]}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(w,{value:i.pointsAwarded,suffix:"pts",valueStyle:{color:i.completed?"#52c41a":"#8c8c8c"}}),i.completed?e.jsx(v,{color:"success",children:"Completed"}):e.jsx(v,{color:"default",children:"Pending"})]})]})})});return e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(r,{align:"middle",style:{marginBottom:"24px"},children:[e.jsx(l,{icon:e.jsx(n,{}),onClick:()=>{b("/patient/dashboard")},style:{marginRight:"16px"},children:"Back"}),e.jsxs(C,{level:2,style:{margin:0},children:[e.jsx(a,{style:{marginRight:8}}),"Rewards Program"]})]}),e.jsxs(r,{gutter:[16,16],children:[e.jsx(d,{span:24,lg:8,children:e.jsxs(o,{children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:16},children:[e.jsx(C,{level:4,children:"Your Progress"}),e.jsxs("div",{style:{position:"relative",width:120,height:120,margin:"0 auto"},children:[e.jsx(c,{type:"circle",percent:Math.round(I/500*100),format:()=>`${I} pts`,width:120}),e.jsx("div",{style:{position:"absolute",top:-10,right:-10,background:"#1890ff",color:"white",borderRadius:"50%",width:40,height:40,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",fontSize:18},children:2})]}),e.jsxs(S,{style:{marginTop:16},children:[e.jsx(A,{strong:!0,children:500-I})," points until Level ",3]})]}),e.jsx(p,{children:"Reward Levels"}),e.jsxs(m,{direction:"vertical",current:1,size:"small",children:[e.jsx(q,{title:"Level 1",description:"Basic rewards unlocked"}),e.jsx(q,{title:"Level 2",description:"Medical benefits unlocked"}),e.jsx(q,{title:"Level 3",description:"Premium rewards unlocked"}),e.jsx(q,{title:"Level 4",description:"VIP benefits unlocked"}),e.jsx(q,{title:"Level 5",description:"All rewards unlocked"})]}),e.jsx(p,{children:"Points Summary"}),e.jsxs("div",{children:[e.jsxs(r,{children:[e.jsx(d,{span:12,children:e.jsx(A,{children:"Available Points:"})}),e.jsx(d,{span:12,style:{textAlign:"right"},children:e.jsx(A,{strong:!0,children:I})})]}),e.jsxs(r,{children:[e.jsx(d,{span:12,children:e.jsx(A,{children:"Total Earned:"})}),e.jsx(d,{span:12,style:{textAlign:"right"},children:e.jsx(A,{strong:!0,children:450})})]}),e.jsxs(r,{children:[e.jsx(d,{span:12,children:e.jsx(A,{children:"Redeemed:"})}),e.jsx(d,{span:12,style:{textAlign:"right"},children:e.jsx(A,{strong:!0,children:450-I})})]})]})]})}),e.jsx(d,{span:24,lg:16,children:e.jsxs(x,{defaultActiveKey:"rewards",children:[e.jsxs(P,{tab:"Available Rewards",children:[e.jsx(h,{message:"How Rewards Work",description:"Earn points by participating in clinical trials, completing your profile, sharing health data, and more. Redeem your points for valuable rewards including medical benefits, financial incentives, and special services.",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsxs(x,{defaultActiveKey:"medical",children:[e.jsx(P,{tab:"Medical Benefits",children:e.jsx(u,{grid:{gutter:16,xs:1,sm:1,md:2,lg:2,xl:3,xxl:3},dataSource:M,renderItem:G})},"medical"),e.jsx(P,{tab:"Financial Rewards",children:e.jsx(u,{grid:{gutter:16,xs:1,sm:1,md:2,lg:2,xl:3,xxl:3},dataSource:O,renderItem:G})},"financial"),e.jsx(P,{tab:"Services",children:e.jsx(u,{grid:{gutter:16,xs:1,sm:1,md:2,lg:2,xl:3,xxl:3},dataSource:W,renderItem:G})},"services")]})]},"rewards"),e.jsxs(P,{tab:"Achievements",children:[e.jsx(h,{message:"Earn Points Through Achievements",description:"Complete these achievements to earn points that can be redeemed for rewards. Each achievement represents an important milestone in your clinical trial journey.",type:"info",showIcon:!0,style:{marginBottom:16}}),e.jsxs(x,{defaultActiveKey:"pending",children:[e.jsx(P,{tab:"Pending Achievements",children:e.jsx(u,{grid:{gutter:16,xs:1,sm:1,md:2,lg:2,xl:2,xxl:3},dataSource:U,renderItem:J})},"pending"),e.jsx(P,{tab:"Completed Achievements",children:e.jsx(u,{grid:{gutter:16,xs:1,sm:1,md:2,lg:2,xl:2,xxl:3},dataSource:Y,renderItem:J})},"completed")]})]},"achievements")]})})]}),e.jsx(j,{title:null==B?void 0:B.title,open:T,onCancel:H,footer:[e.jsx(l,{onClick:H,children:"Cancel"},"cancel"),e.jsx(l,{type:"primary",loading:L,disabled:!B||I<((null==B?void 0:B.pointsRequired)||0),onClick:async()=>{if(B){F(!0);try{await new Promise((e=>setTimeout(e,1e3))),D((e=>e-B.pointsRequired)),z(!1),E(null)}catch(e){}finally{F(!1)}}},children:"Redeem Reward"},"redeem")],children:B&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:16},children:["medical"===B.type?e.jsx(g,{style:{fontSize:32,color:"#1890ff",marginRight:16}}):"financial"===B.type?e.jsx(y,{style:{fontSize:32,color:"#52c41a",marginRight:16}}):e.jsx(f,{style:{fontSize:32,color:"#722ed1",marginRight:16}}),e.jsxs("div",{children:[e.jsx(C,{level:4,style:{margin:0},children:B.title}),e.jsx(v,{color:"medical"===B.type?"blue":"financial"===B.type?"green":"purple",children:B.type.charAt(0).toUpperCase()+B.type.slice(1)})]})]}),e.jsx(S,{children:B.description}),e.jsx(p,{}),e.jsxs(r,{gutter:16,children:[e.jsx(d,{span:12,children:e.jsx(w,{title:"Points Required",value:B.pointsRequired,suffix:"pts",valueStyle:{color:I>=B.pointsRequired?"#52c41a":"#ff4d4f"}})}),e.jsx(d,{span:12,children:e.jsx(w,{title:"Your Points",value:I,suffix:"pts"})})]}),e.jsx(p,{}),e.jsxs("div",{children:[e.jsx(A,{strong:!0,children:"Expiry Date:"})," ",B.expiryDate]}),I<B.pointsRequired&&e.jsx(h,{message:`You need ${B.pointsRequired-I} more points to redeem this reward`,type:"warning",showIcon:!0,style:{marginTop:16}})]})})]})};export{k as default};
//# sourceMappingURL=RewardMechanism-cee639e5.js.map
