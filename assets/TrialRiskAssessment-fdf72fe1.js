import{j as e}from"./index-447909c0.js";import{f as s,r as i,R as l}from"./react-vendor-f13607dd.js";import{a as t}from"./authService-993db9ec.js";import{p as r}from"./patientService-6b05a51d.js";import{p as a,J as n,R as o,b as c,K as d,n as u,k as h,N as m,S as y,e as p,d as x,O as j,A as v,h as g,W as f,f as k}from"./antd-vendor-11d390a1.js";const{Title:b,Paragraph:w}=k,{Option:S}=h,{Step:P}=f,T=({trial:k,onComplete:T,standalone:C=!0})=>{const A=s(),I=t.getCurrentUser(),[L]=a.useForm(),[q,H]=i.useState(0),[F,R]=i.useState(null),[M,B]=i.useState(!1);l.useEffect((()=>{I&&"patient"===I.role||A("/patient/login")}),[I,A]);const N=[{title:"Health Profile",content:e.jsxs(e.Fragment,{children:[e.jsx(n,{message:"Your information is secure",description:"The health information you provide is encrypted and will only be used for assessing your eligibility and potential risks for clinical trials.",type:"info",showIcon:!0,style:{marginBottom:24}}),e.jsx(o,{justify:"end",style:{marginBottom:16},children:e.jsx(c,{type:"primary",icon:e.jsx(d,{}),onClick:async()=>{var e,s,i,l,t;try{const a=await r.getPatientProfile((null==I?void 0:I.email)||"");if(a.success){const r=null==(e=a.profile)?void 0:e.medicalHistory;L.setFieldsValue({conditions:(null==(s=null==r?void 0:r.conditions)?void 0:s.join(", "))||"",medications:(null==(i=null==r?void 0:r.medications)?void 0:i.join(", "))||"",allergies:(null==(l=null==r?void 0:r.allergies)?void 0:l.join(", "))||"",familyHistory:(null==(t=null==r?void 0:r.familyHistory)?void 0:t.join(", "))||""}),B(!0)}}catch(a){}},disabled:M,children:M?"Health Data Imported":"Import My Health Data"})}),e.jsx(a.Item,{name:"conditions",label:"Medical Conditions",rules:[{required:!0,message:"Please enter your medical conditions"}],children:e.jsx(u.TextArea,{placeholder:"List any diagnosed medical conditions (e.g., diabetes, hypertension)",rows:3})}),e.jsx(a.Item,{name:"medications",label:"Current Medications",rules:[{required:!0,message:"Please enter your current medications"}],children:e.jsx(u.TextArea,{placeholder:"List all medications you are currently taking",rows:3})}),e.jsx(a.Item,{name:"allergies",label:"Allergies",rules:[{required:!0,message:"Please enter your allergies"}],children:e.jsx(u.TextArea,{placeholder:"List any allergies to medications, foods, or other substances",rows:2})}),e.jsx(a.Item,{name:"familyHistory",label:"Family Medical History",rules:[{required:!0,message:"Please enter your family medical history"}],children:e.jsx(u.TextArea,{placeholder:"List relevant family medical history",rows:2})})]})},{title:"Lifestyle Factors",content:e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{name:"smoking",label:"Smoking Status",rules:[{required:!0,message:"Please select your smoking status"}],children:e.jsxs(h,{placeholder:"Select your smoking status",children:[e.jsx(S,{value:"never",children:"Never smoked"}),e.jsx(S,{value:"former",children:"Former smoker"}),e.jsx(S,{value:"current",children:"Current smoker"})]})}),e.jsx(a.Item,{name:"alcohol",label:"Alcohol Consumption",rules:[{required:!0,message:"Please select your alcohol consumption"}],children:e.jsxs(h,{placeholder:"Select your alcohol consumption",children:[e.jsx(S,{value:"none",children:"None"}),e.jsx(S,{value:"occasional",children:"Occasional (1-2 drinks per week)"}),e.jsx(S,{value:"moderate",children:"Moderate (3-7 drinks per week)"}),e.jsx(S,{value:"heavy",children:"Heavy (8+ drinks per week)"})]})}),e.jsx(a.Item,{name:"exercise",label:"Physical Activity Level",rules:[{required:!0,message:"Please select your physical activity level"}],children:e.jsxs(h,{placeholder:"Select your physical activity level",children:[e.jsx(S,{value:"sedentary",children:"Sedentary (little to no exercise)"}),e.jsx(S,{value:"light",children:"Light (1-3 days per week)"}),e.jsx(S,{value:"moderate",children:"Moderate (3-5 days per week)"}),e.jsx(S,{value:"active",children:"Active (6-7 days per week)"})]})}),e.jsx(a.Item,{name:"diet",label:"Diet Description",rules:[{required:!0,message:"Please describe your diet"}],children:e.jsx(u.TextArea,{placeholder:"Briefly describe your typical diet",rows:3})})]})},{title:"Trial-Specific Questions",content:e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:["These questions are specific to ",(null==k?void 0:k.title)||"the selected clinical trial",". Your answers help us assess your eligibility and potential risks."]}),e.jsx(a.Item,{name:"previousTrials",label:"Previous Clinical Trial Participation",rules:[{required:!0,message:"Please select an option"}],children:e.jsxs(h,{placeholder:"Have you participated in clinical trials before?",children:[e.jsx(S,{value:"yes",children:"Yes"}),e.jsx(S,{value:"no",children:"No"})]})}),e.jsx(a.Item,{name:"availability",label:"Availability for Trial Visits",rules:[{required:!0,message:"Please select your availability"}],children:e.jsxs(h,{placeholder:"Select your availability for trial visits",children:[e.jsx(S,{value:"weekdays",children:"Weekdays only"}),e.jsx(S,{value:"weekends",children:"Weekends only"}),e.jsx(S,{value:"both",children:"Both weekdays and weekends"}),e.jsx(S,{value:"limited",children:"Limited availability"})]})}),e.jsx(a.Item,{name:"transportation",label:"Transportation to Trial Site",rules:[{required:!0,message:"Please select an option"}],children:e.jsxs(h,{placeholder:"Do you have reliable transportation to the trial site?",children:[e.jsx(S,{value:"yes",children:"Yes"}),e.jsx(S,{value:"no",children:"No"}),e.jsx(S,{value:"sometimes",children:"Sometimes"})]})}),e.jsx(a.Item,{name:"concerns",label:"Concerns or Questions",children:e.jsx(u.TextArea,{placeholder:"List any concerns or questions you have about participating in this trial",rows:3})})]})},{title:"Results",content:F?e.jsx(m,{status:"low"===F.riskLevel?"success":"warning",title:`Risk Assessment Complete - ${F.matchPercentage}% Match`,subTitle:F.recommendation,extra:[e.jsxs(y,{direction:"vertical",size:"large",style:{width:"100%"},children:[e.jsx(p,{title:"Risk Assessment Summary",children:e.jsxs(o,{gutter:[16,16],children:[e.jsx(x,{span:8,children:e.jsx(j,{title:"Risk Level",value:F.riskLevel.charAt(0).toUpperCase()+F.riskLevel.slice(1),valueStyle:{color:"low"===F.riskLevel?"#3f8600":"moderate"===F.riskLevel?"#faad14":"#cf1322"}})}),e.jsx(x,{span:8,children:e.jsx(j,{title:"Match Score",value:F.score,suffix:"/100"})}),e.jsx(x,{span:8,children:e.jsx(j,{title:"Compatibility",value:F.matchPercentage,suffix:"%",valueStyle:{color:"#3f8600"}})})]})}),e.jsx(n,{message:"Next Steps",description:"We recommend discussing these results with your healthcare provider before proceeding with the trial application.",type:"info",showIcon:!0}),C&&e.jsx(c,{type:"primary",onClick:()=>A("/patient/find-trials"),children:"Return to Trial Search"})]})]}):null}];return e.jsxs("div",{style:{padding:"24px"},children:[C&&e.jsxs(o,{align:"middle",style:{marginBottom:"24px"},children:[e.jsx(c,{icon:e.jsx(v,{}),onClick:()=>{C&&A(-1)},style:{marginRight:"16px"},children:"Back"}),e.jsxs(b,{level:2,style:{margin:0},children:[e.jsx(g,{style:{marginRight:8}}),"Trial Risk Assessment"]})]}),e.jsxs(p,{children:[e.jsx(f,{current:q,style:{marginBottom:24},children:N.map((s=>e.jsx(P,{title:s.title},s.title)))}),e.jsxs(a,{form:L,layout:"vertical",requiredMark:"optional",children:[e.jsx("div",{children:N[q].content}),q<N.length-1&&e.jsxs("div",{style:{marginTop:24,display:"flex",justifyContent:"space-between"},children:[q>0&&e.jsx(c,{onClick:()=>{H(q-1)},children:"Previous"}),e.jsx("div",{style:{flex:"1 1 0"}}),e.jsx(c,{type:"primary",onClick:q===N.length-2?()=>{L.validateFields().then((()=>{const e={score:85,recommendation:"Based on your health profile, you appear to be a good candidate for this trial. However, please consult with your healthcare provider before proceeding.",riskLevel:"low",matchPercentage:85};R(e),H(q+1),T&&T(e)}))}:()=>{L.validateFields().then((()=>{H(q+1)}))},children:q===N.length-2?"Submit":"Next"})]})]})]})]})};export{T as default};
//# sourceMappingURL=TrialRiskAssessment-fdf72fe1.js.map
