import{j as e}from"./index-d693efaa.js";import{f as t,r as s}from"./react-vendor-f13607dd.js";import{a}from"./authService-993db9ec.js";import{t as l}from"./trialService-28b75ce4.js";import{p as r,R as i,b as n,A as c,a9 as d,x as o,X as u,d as m,n as x,k as j,f as h,s as p,m as g,S as y,aa as f,ab as D}from"./antd-vendor-11d390a1.js";const{Title:T}=h,{Option:k}=j,{TextArea:v}=x,I=()=>{const h=t(),I=a.getCurrentUser(),[b,C]=s.useState([]),[P,S]=s.useState(!0),[A,q]=s.useState(!1),[w,E]=s.useState(null),[F]=r.useForm();s.useEffect((()=>{I&&"trialTeam"===I.role||h("/trial-team/login")}),[I,h]),s.useEffect((()=>{(async()=>{try{const e=await l.getAllTrials();e.success?C(e.trials):p.error("Failed to load clinical trials")}catch(e){p.error("An error occurred while loading trials")}finally{S(!1)}})()}),[]);const B=e=>{E(e),F.setFieldsValue({title:e.title,description:e.description,status:e.status,location:e.location,startDate:e.startDate,endDate:e.endDate,compensation:e.compensation,contactEmail:e.contactEmail,contactPhone:e.contactPhone}),q(!0)},L=e=>{switch(e){case"recruiting":return"green";case"active":return"blue";case"completed":return"gray";default:return"default"}},R=[{title:"Title",dataIndex:"title",key:"title",render:(t,s)=>e.jsx("a",{onClick:()=>B(s),children:t})},{title:"Status",dataIndex:"status",key:"status",render:t=>e.jsx(g,{color:L(t),children:t.charAt(0).toUpperCase()+t.slice(1)})},{title:"Location",dataIndex:"location",key:"location"},{title:"Start Date",dataIndex:"startDate",key:"startDate"},{title:"End Date",dataIndex:"endDate",key:"endDate"},{title:"Actions",key:"actions",render:(t,s)=>e.jsxs(y,{size:"middle",children:[e.jsx(n,{icon:e.jsx(f,{}),onClick:()=>B(s),children:"Edit"}),e.jsx(n,{danger:!0,icon:e.jsx(D,{}),onClick:()=>(async()=>{try{p.success("Trial deleted successfully!");const e=await l.getAllTrials();e.success&&C(e.trials)}catch(e){p.error("Failed to delete trial")}})(),children:"Delete"})]})}];return e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(i,{align:"middle",style:{marginBottom:"24px"},children:[e.jsx(n,{icon:e.jsx(c,{}),onClick:()=>{h("/trial-team/dashboard")},style:{marginRight:"16px"},children:"Back"}),e.jsx(T,{level:2,style:{margin:0},children:"Manage Clinical Trials"})]}),e.jsx(i,{justify:"end",style:{marginBottom:"16px"},children:e.jsx(n,{type:"primary",icon:e.jsx(d,{}),onClick:()=>{E(null),F.resetFields(),q(!0)},children:"Add New Trial"})}),e.jsx(o,{columns:R,dataSource:b,rowKey:"id",loading:P}),e.jsx(u,{title:w?"Edit Trial":"Add New Trial",open:A,onOk:async()=>{try{await F.validateFields(),w?p.success("Trial updated successfully!"):p.success("Trial created successfully!"),q(!1);const e=await l.getAllTrials();e.success&&C(e.trials)}catch(e){}},onCancel:()=>{q(!1)},confirmLoading:P,children:e.jsxs(r,{form:F,layout:"vertical",children:[e.jsx(i,{gutter:16,children:e.jsx(m,{span:24,children:e.jsx(r.Item,{name:"title",label:"Trial Title",rules:[{required:!0,message:"Please enter trial title"}],children:e.jsx(x,{})})})}),e.jsx(r.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Please enter trial description"}],children:e.jsx(v,{rows:4})}),e.jsxs(i,{gutter:16,children:[e.jsx(m,{span:8,children:e.jsx(r.Item,{name:"status",label:"Status",rules:[{required:!0,message:"Please select status"}],children:e.jsxs(j,{children:[e.jsx(k,{value:"recruiting",children:"Recruiting"}),e.jsx(k,{value:"active",children:"Active"}),e.jsx(k,{value:"completed",children:"Completed"})]})})}),e.jsx(m,{span:16,children:e.jsx(r.Item,{name:"location",label:"Location",rules:[{required:!0,message:"Please enter location"}],children:e.jsx(x,{})})})]}),e.jsxs(i,{gutter:16,children:[e.jsx(m,{span:12,children:e.jsx(r.Item,{name:"startDate",label:"Start Date",rules:[{required:!0,message:"Please enter start date"}],children:e.jsx(x,{})})}),e.jsx(m,{span:12,children:e.jsx(r.Item,{name:"endDate",label:"End Date",rules:[{required:!0,message:"Please enter end date"}],children:e.jsx(x,{})})})]}),e.jsx(r.Item,{name:"compensation",label:"Compensation",rules:[{required:!0,message:"Please enter compensation details"}],children:e.jsx(x,{})}),e.jsxs(i,{gutter:16,children:[e.jsx(m,{span:12,children:e.jsx(r.Item,{name:"contactEmail",label:"Contact Email",rules:[{required:!0,message:"Please enter contact email"}],children:e.jsx(x,{})})}),e.jsx(m,{span:12,children:e.jsx(r.Item,{name:"contactPhone",label:"Contact Phone",rules:[{required:!0,message:"Please enter contact phone"}],children:e.jsx(x,{})})})]})]})})]})};export{I as default};
//# sourceMappingURL=ManageTrials-eb7222e8.js.map
