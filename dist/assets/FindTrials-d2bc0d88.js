import{j as e}from"./index-d693efaa.js";import{f as t,r as s}from"./react-vendor-f13607dd.js";import{a as r}from"./authService-993db9ec.js";import{t as i}from"./trialService-28b75ce4.js";import{R as a,b as l,A as n,d as c,n as o,j as d,k as u,c as p,l as h,e as x,m as j,S as g,f as m,s as f}from"./antd-vendor-11d390a1.js";const{Title:y,Text:v,Paragraph:C}=m,{Option:w}=u,b=()=>{const m=t(),b=r.getCurrentUser(),[S,A]=s.useState([]),[T,F]=s.useState([]),[L,k]=s.useState(!0),[E,z]=s.useState(""),[B,D]=s.useState("all");s.useEffect((()=>{b&&"patient"===b.role||m("/patient/login")}),[b,m]),s.useEffect((()=>{(async()=>{try{const e=await i.getAllTrials();e.success?(A(e.trials),F(e.trials)):f.error("Failed to load clinical trials")}catch(e){f.error("An error occurred while loading trials")}finally{k(!1)}})()}),[]),s.useEffect((()=>{let e=S;if("all"!==B&&(e=e.filter((e=>e.status===B))),E){const t=E.toLowerCase();e=e.filter((e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.location.toLowerCase().includes(t)))}F(e)}),[E,B,S]);const R=e=>{switch(e){case"recruiting":return"green";case"active":return"blue";case"completed":return"gray";default:return"default"}};return e.jsxs("div",{style:{padding:"24px"},children:[e.jsxs(a,{align:"middle",style:{marginBottom:"24px"},children:[e.jsx(l,{icon:e.jsx(n,{}),onClick:()=>{m("/patient/dashboard")},style:{marginRight:"16px"},children:"Back"}),e.jsx(y,{level:2,style:{margin:0},children:"Find Clinical Trials"})]}),e.jsxs(a,{gutter:[16,16],style:{marginBottom:"24px"},children:[e.jsx(c,{span:16,children:e.jsx(o,{placeholder:"Search by title, description, or location",prefix:e.jsx(d,{}),value:E,onChange:e=>z(e.target.value),size:"large"})}),e.jsx(c,{span:8,children:e.jsxs(u,{style:{width:"100%"},placeholder:"Filter by status",value:B,onChange:e=>D(e),size:"large",children:[e.jsx(w,{value:"all",children:"All Statuses"}),e.jsx(w,{value:"recruiting",children:"Recruiting"}),e.jsx(w,{value:"active",children:"Active"}),e.jsx(w,{value:"completed",children:"Completed"})]})})]}),L?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(p,{size:"large"})}):e.jsx(h,{grid:{gutter:16,column:1},dataSource:T,locale:{emptyText:"No clinical trials found"},renderItem:t=>e.jsx(h.Item,{children:e.jsxs(x,{children:[e.jsxs(a,{justify:"space-between",align:"middle",children:[e.jsxs(c,{children:[e.jsx(y,{level:4,children:t.title}),e.jsx(j,{color:R(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})]}),e.jsx(c,{children:e.jsx(l,{type:"primary",onClick:()=>(async e=>{if(null==b?void 0:b.email)try{const t=await i.applyForTrial(b.email,e);t.success?f.success("Application submitted successfully!"):f.error(t.message||"Failed to submit application")}catch(t){f.error("An error occurred while submitting your application")}else f.error("You must be logged in to apply")})(t.id),disabled:"recruiting"!==t.status,children:"Apply Now"})})]}),e.jsx(C,{children:t.description}),e.jsxs(g,{direction:"vertical",children:[e.jsx(v,{strong:!0,children:"Location:"}),e.jsx(v,{children:t.location}),e.jsx(v,{strong:!0,children:"Duration:"}),e.jsxs(v,{children:[t.startDate," to ",t.endDate]}),e.jsx(v,{strong:!0,children:"Compensation:"}),e.jsx(v,{children:t.compensation}),e.jsx(v,{strong:!0,children:"Contact:"}),e.jsxs(v,{children:[t.contactEmail," | ",t.contactPhone]})]})]})})})]})};export{b as default};
//# sourceMappingURL=FindTrials-d2bc0d88.js.map
